<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>AJAX</h1>
    </div>

    <script type="text/javascript">
      $(document).ready(function() {
        function fetchCharacters() {
          var httpRequest = new XMLHttpRequest();
          httpRequest.open("GET", "https://ironhack-characters.herokuapp.com/characters");
          httpRequest.onreadystatechange = handleResponse;
          httpRequest.send();
        }
        function handleResponse(event) {
          var httpRequest = event.currentTarget;
          if (httpRequest.readyState === 4) {
            if (httpRequest.status === 200) {
              console.log('--- without jQuery ---');
              showCharacters(JSON.parse(httpRequest.responseText));
            }
            else {
              alert("There was an error");
            }
          }
        }
        function showCharacters (charactersArray) {
          charactersArray.forEach(function (theCharacter) {
            console.log(theCharacter);
          });
        }
        fetchCharacters();
        function fetchCharactersWithJQuery() {
          $.ajax({
            type: "GET",
            url: "https://ironhack-characters.herokuapp.com/characters",
            success: function (response) {
              console.log('--- with jQuery ---');
              console.log("Success!");
              showCharacters(response);
            },
            error: function (error) {
              console.log("Error!");
              console.log(error.responseText);
            }
          });
        }
        fetchCharactersWithJQuery();
      });
    </script>
  </body>
</html>
